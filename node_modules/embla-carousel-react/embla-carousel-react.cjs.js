'use strict';

var react = require('react');
var emblaCarouselReactiveUtils = require('embla-carousel-reactive-utils');
var EmblaCarousel = require('embla-carousel');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var EmblaCarousel__default = /*#__PURE__*/_interopDefaultLegacy(EmblaCarousel);

function useEmblaCarousel(options = {}, plugins = []) {
  const storedOptions = react.useRef(options);
  const storedPlugins = react.useRef(plugins);
  const [emblaApi, setEmblaApi] = react.useState();
  const [viewport, setViewport] = react.useState();
  const reInit = react.useCallback(() => {
    if (emblaApi) emblaApi.reInit(storedOptions.current, storedPlugins.current);
  }, [emblaApi]);
  react.useEffect(() => {
    if (emblaCarouselReactiveUtils.canUseDOM() && viewport) {
      EmblaCarousel__default["default"].globalOptions = useEmblaCarousel.globalOptions;
      const newEmblaApi = EmblaCarousel__default["default"](viewport, storedOptions.current, storedPlugins.current);
      setEmblaApi(newEmblaApi);
      return () => newEmblaApi.destroy();
    } else {
      setEmblaApi(undefined);
    }
  }, [viewport, setEmblaApi]);
  react.useEffect(() => {
    if (emblaCarouselReactiveUtils.areOptionsEqual(storedOptions.current, options)) return;
    storedOptions.current = options;
    reInit();
  }, [options, reInit]);
  react.useEffect(() => {
    if (emblaCarouselReactiveUtils.arePluginsEqual(storedPlugins.current, plugins)) return;
    storedPlugins.current = plugins;
    reInit();
  }, [plugins, reInit]);
  return [setViewport, emblaApi];
}
useEmblaCarousel.globalOptions = undefined;

module.exports = useEmblaCarousel;
//# sourceMappingURL=embla-carousel-react.cjs.js.map
